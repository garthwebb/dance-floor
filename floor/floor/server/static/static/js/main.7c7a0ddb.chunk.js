(window.webpackJsonpddfui=window.webpackJsonpddfui||[]).push([[0],{52:function(e,t,a){e.exports=a(76)},57:function(e,t,a){},67:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),o=a.n(s),l=(a(57),a(91)),c=a(93),u=a(94),i=a(87),p=a(90),m=a(20),h=a(4),f=a.n(h),v=a(6),y=a(24),d=a(11),g=a(26),b=a(27),E=a(35),w=a(88),x=a(46),C=a(95),k=a(14),O=function(e){return Math.round(Number.parseInt(e,10)/1e3)},j={maxHeight:200,overflow:"scroll",marginBottom:16};function P(e){var t=e.playlist;if(!t)return null;var a=t.current_position,n=(t.queue||[]).map(function(e,n){var s=n===a,o=s?"list-group-item active":"list-group-item",l=O(t.millis_remaining),c=s&&t.millis_remaining?"(".concat(l,"s remaining)"):"",u="".concat(e.name," ").concat(c);return r.a.createElement("ul",{key:n,className:o},u)}),s=[].concat(Object(k.a)(n.slice(a,n.length)),Object(k.a)(n.slice(0,a)));return r.a.createElement("div",{className:"card card-body bg-light",style:j},r.a.createElement("ul",{className:"list-group"},s))}function S(e){var t=e.onPrevious,a=e.onNext,n=e.onStay,s=e.onSetEnabled,o=e.isEnabled;return r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement("div",{className:"btn-group d-flex",role:"group",style:{marginBottom:16}},r.a.createElement(i.a,{variant:"secondary",onClick:t,className:"w-100"},"Prev"),r.a.createElement(i.a,{variant:"secondary",onClick:n,className:"w-100"},"Stay"),r.a.createElement(i.a,{variant:"secondary",onClick:a,className:"w-100"},"Next")),r.a.createElement(i.a,{variant:"secondary",onClick:function(){return s(!o)},block:!0},o?"Stop":"Start"))}var T=a(32),N=a(92),B=Object(T.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus,&:hover,&$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(N.a),L=function(e){return r.a.createElement(B,Object.assign({},e,{onChange:function(t,a){return e.onChange(a)}}))};function _(e){e.layerInfo;var t=e.onAlphaChange,a=e.onIntensityChange,n=e.onWetDryChange;return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(x.a,{md:5},r.a.createElement("b",null,"alpha")),r.a.createElement(x.a,null,r.a.createElement(L,{valueLabelDisplay:"auto","aria-label":"alpha slider",defaultValue:100,min:0,max:1,step:.01,onChange:t}))),r.a.createElement(w.a,null,r.a.createElement(x.a,{md:5},r.a.createElement("b",null,"wet/dry")),r.a.createElement(x.a,null,r.a.createElement(L,{valueLabelDisplay:"auto","aria-label":"wet/dry slider",defaultValue:127,min:0,max:127,step:1,onChange:n}))),r.a.createElement(w.a,null,r.a.createElement(x.a,{md:5},r.a.createElement("b",null,"intensity")),r.a.createElement(x.a,null,r.a.createElement(L,{valueLabelDisplay:"auto","aria-label":"intensity slider",defaultValue:127,min:0,max:127,step:1,onChange:a}))))}function D(){return r.a.createElement("div",{style:{width:"100%",marginBottom:16}},r.a.createElement("iframe",{style:{border:0},src:"http://localhost:1979?is_embedded=true",title:"floor preview"}))}function I(e){var t=e.processors,a=e.value,n=e.onChange,s=t.map(function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)});return r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Control,{as:"select",value:a,onChange:n},r.a.createElement("option",{value:""}),s))}var A=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={taps:[],tapTimeout:null},a.onHaveFourTaps=function(e){var t=[e[1]-e[0],e[2]-e[1],e[3]-e[2]],n=60*(1/((t[0]+t[1]+t[2])/3/1e3));(n=Math.round(10*n)/10)<60||n>200?console.error("Ignoring crazy BPM: ",n):a.props.onBpmChange(n)},a.onTap=function(){var e=a.state,t=e.taps,n=e.tapTimeout,r=(new Date).getTime();if(t.push(r),4===t.length)clearTimeout(n),a.setState({taps:[],tapTimeout:null}),a.onHaveFourTaps(t);else{clearTimeout(n);var s=setTimeout(a.onTapTimeout,5e3);a.setState({taps:t,tapTimeout:s})}},a.onTapTimeout=function(){a.setState({taps:[],tapTimeout:null})},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.taps,t="Tap";return e.length>0&&(t="Tap (".concat(4-e.length," more ...)")),r.a.createElement(i.a,{variant:"secondary",onClick:this.onTap,className:"w-100"},t)}}]),t}(r.a.Component),W=a(89),M=a(47);function H(e){var t=e.bpm,a=e.onBpmChange,n=e.onNudgeTempo;return r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(W.a,{className:"mb-3"},r.a.createElement(M.a,{type:"number",min:"40.0",max:"220.0",step:"0.1",value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement(W.a.Append,null,r.a.createElement(W.a.Text,null,"BPM"))),r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(A,{onBpmChange:a})),r.a.createElement("div",{className:"btn-group d-flex",role:"group",style:{marginBottom:16}},r.a.createElement(i.a,{variant:"secondary",onClick:function(){n(-.1,null)},className:"w-100"},"Slower"),r.a.createElement(i.a,{variant:"secondary",disabled:!0,className:"w-100"},"BPM"),r.a.createElement(i.a,{variant:"secondary",onClick:function(){n(.1,null)},className:"w-100"},"Faster")),r.a.createElement("div",{className:"btn-group d-flex",role:"group",style:{marginBottom:16}},r.a.createElement(i.a,{variant:"secondary",onClick:function(){n(0,-100)},className:"w-100"},"Earlier"),r.a.createElement(i.a,{variant:"secondary",disabled:!0,className:"w-100"},"Downbeat"),r.a.createElement(i.a,{variant:"secondary",onClick:function(){n(0,100)},className:"w-100"},"Later")))}var q=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:1977";Object(y.a)(this,e),this.baseUrl=t}return Object(d.a)(e,[{key:"_request",value:function(){var e=Object(v.a)(f.a.mark(function e(t,a){var n,r,s,o,l=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:null,a.startsWith("/")){e.next=3;break}throw new Error("Bad path: ".concat(a));case 3:return r="".concat(this.baseUrl).concat(a),e.next=6,fetch(r,{method:t,headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0});case 6:return s=e.sent,e.next=9,s.json();case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(v.a)(f.a.mark(function e(t){var a,n=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:null,e.abrupt("return",this._request("GET",t,a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(v.a)(f.a.mark(function e(t){var a,n=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:null,e.abrupt("return",this._request("POST",t,a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(v.a)(f.a.mark(function e(t){var a,n=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:null,e.abrupt("return",this._request("PATCH",t,a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get("/api/status"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"playlistAdvance",value:function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("/api/playlist/advance"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"playlistStay",value:function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("/api/playlist/stay"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"playlistPrevious",value:function(){var e=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("/api/playlist/previous"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setTempo",value:function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("/api/tempo",{bpm:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"nudgeTempo",value:function(){var e=Object(v.a)(f.a.mark(function e(t,a){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={bpm_delta:t,downbeat_millis_delta:a},e.abrupt("return",this.post("/api/tempo/nudge",n));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"setLayer",value:function(){var e=Object(v.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.patch("/api/layers/".concat(t),a));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"setBrightness",value:function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("/api/brightness",{brightness:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),F=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).refreshStatus=Object(v.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getStatus();case 2:t=e.sent,a.setState({status:t});case 4:case"end":return e.stop()}},e)})),a.onPlaylistPrevious=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.playlistPrevious();case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)})),a.onPlaylistStay=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.playlistStay();case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)})),a.onPlaylistNext=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.playlistAdvance();case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)})),a.onPlaylistStop=Object(v.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.playlistStop();case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)})),a.onLayerParamChange=function(){var e=Object(v.a)(f.a.mark(function e(t,n,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.setLayer(t,Object(m.a)({},n,r));case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onLayerProcesorChange=function(){var e=Object(v.a)(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.setLayer(t,{processor_name:n});case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onBpmChange=function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.setTempo(t);case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onNudgeTempo=function(){var e=Object(v.a)(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.nudgeTempo(t,n);case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onBrightnessChange=function(){var e=Object(v.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.setBrightness(t);case 2:return e.next=4,a.refreshStatus();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={status:{}},a.statusPoller=null,a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;q.getStatus().then(function(t){console.log(t),e.setState({status:t})}),this.statusPoller=setInterval(Object(v.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStatus();case 2:case"end":return t.stop()}},t)})),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statusPoller)}},{key:"render",value:function(){var e=this,t=this.state.status,a=t.processors?Object.values(t.processors):[];return t.layers?r.a.createElement(w.a,null,r.a.createElement(x.a,{md:4},r.a.createElement("div",{className:"ddf-panel"},r.a.createElement("h5",null,"Playlist"),r.a.createElement(P,{playlist:t.playlist}),r.a.createElement(S,{isEnabled:t.layers.playlist.enabled,onSetEnabled:function(t){return e.onLayerParamChange("playlist","enabled",!!t)},onPrevious:this.onPlaylistPrevious,onStay:this.onPlaylistStay,onNext:this.onPlaylistNext}),r.a.createElement(_,{layerInfo:t.layers?t.layers.playlist:{},onAlphaChange:function(t){return e.onLayerParamChange("playlist","alpha",t)},onWetDryChange:function(t){return e.onLayerParamChange("playlist","ranged_values",{0:t})},onIntensityChange:function(t){return e.onLayerParamChange("playlist","ranged_values",{1:t})}}))),r.a.createElement(x.a,{md:4},r.a.createElement("h5",null,"Main"),r.a.createElement(D,null),r.a.createElement(H,{bpm:t.tempo.bpm,onBpmChange:this.onBpmChange,onNudgeTempo:this.onNudgeTempo}),r.a.createElement(w.a,null,r.a.createElement(x.a,{md:5},r.a.createElement("b",null,"brightness")),r.a.createElement(x.a,null,r.a.createElement(L,{valueLabelDisplay:"auto","aria-label":"brightness slider",value:t.brightness,min:0,max:1,step:.01,onChange:this.onBrightnessChange})))),r.a.createElement(x.a,{md:4},r.a.createElement("div",{className:"ddf-panel"},r.a.createElement("h5",null,"Layers"),r.a.createElement(C.a,{bg:"light",style:{width:"18rem"}},r.a.createElement(C.a.Header,null,"Overlay 1"),r.a.createElement(C.a.Body,null,r.a.createElement(I,{value:t.layers&&t.layers.overlay1.processor_name||"",processors:a,onChange:function(t){return e.onLayerProcesorChange("overlay1",t.target.value)}}),r.a.createElement(_,{layerInfo:t.layers?t.layers.overlay1:{},onAlphaChange:function(t){return e.onLayerParamChange("overlay1","alpha",t)},onWetDryChange:function(t){return e.onLayerParamChange("overlay1","ranged_values",{0:t})},onIntensityChange:function(t){return e.onLayerParamChange("overlay1","ranged_values",{1:t})}}))),r.a.createElement("br",null),r.a.createElement(C.a,{bg:"light",style:{width:"18rem"}},r.a.createElement(C.a.Header,null,"Overlay 2"),r.a.createElement(C.a.Body,null,r.a.createElement(I,{value:t.layers&&t.layers.overlay2.processor_name||"",processors:a,onChange:function(t){return e.onLayerProcesorChange("overlay2",t.target.value)}}),r.a.createElement(_,{layerInfo:t.layers?t.layers.overlay2:{},onAlphaChange:function(t){return e.onLayerParamChange("overlay2","alpha",t)},onWetDryChange:function(t){return e.onLayerParamChange("overlay2","ranged_values",{0:t})},onIntensityChange:function(t){return e.onLayerParamChange("overlay2","ranged_values",{1:t})}})))))):null}}]),t}(r.a.Component);a(63),a(64),a(65),a(66),a(67);var G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{bg:"dark",variant:"dark"},r.a.createElement(l.a.Brand,{href:"#home"},"DDF-GW1"),r.a.createElement(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(l.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(c.a,{className:"mr-auto"}),r.a.createElement(u.a,{inline:!0},r.a.createElement(i.a,{variant:"outline-success"},"Reload")))),r.a.createElement(p.a,null,r.a.createElement(F,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[52,1,2]]]);
//# sourceMappingURL=main.7c7a0ddb.chunk.js.map